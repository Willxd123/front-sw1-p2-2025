<aside
  *ngIf="!isPreviewMode"
  class="space-y-4 px-6 py-4"
>
  <!-- Botón de modo previsualización -->
  <button
    class="w-full bg-gray-800 text-white py-2 rounded hover:bg-gray-900 mb-4 transition duration-200"
    (click)="togglePreviewMode()"
  >
    👁️
    {{ isPreviewMode ? "Salir de previsualización" : "Modo previsualización" }}
  </button>

  <!-- Botón cargar JSON de ejemplo -->
  <button
    class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700 mb-2 transition duration-200"
    (click)="cargarJsonEjemploLocal()"
  >
    📥 Cargar JSON de ejemplo
  </button>

  <!-- Botones para agregar componentes -->
  <div class="space-y-2">
    <button
      class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition duration-200"
      (click)="addContainer()"
    >
      ➕ Agregar Container
    </button>

    <button
      class="w-full bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700 transition duration-200"
      (click)="addDropdownButton()"
    >
      ➕ Agregar Dropdown
    </button>

    <button
      class="w-full bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700 transition duration-200"
      (click)="addTextRoot()"
    >
      ➕ Agregar Texto
    </button>

    <button
      class="w-full bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700 transition duration-200"
      (click)="addCheckbox()"
    >
      ➕ Agregar Checkbox
    </button>

    <button
      class="w-full bg-yellow-500 text-white py-2 rounded hover:bg-yellow-600 transition duration-200"
      (click)="addTextButton()"
    >
      ➕ Agregar IconButton
    </button>

    <button
      class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700 transition duration-200"
      (click)="addTextField()"
    >
      📝 Agregar TextField
    </button>

    <button
      class="w-full bg-lime-900 text-white py-2 rounded hover:bg-yellow-600 transition duration-200"
      (click)="addAppBar()"
      [disabled]="currentHasAppBar()"
      [ngClass]="{ 'opacity-50 cursor-not-allowed': currentHasAppBar() }"
    >
      📱 AppBar
    </button>
  </div>

  <!-- Gestión de pantallas -->
  <div class="mt-6">
    <h3 class="text-sm font-semibold mb-3 text-gray-700">Gestión de Pantallas</h3>
    
    <!-- Botón para agregar nueva pantalla -->
    <button
      class="w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition duration-200 mb-4"
      (click)="onAddPage()"
    >
      ➕ Nueva Pantalla
    </button>

    <!-- Lista de pantallas existentes -->
    <div class="space-y-2">
      <div
        *ngFor="let pantalla of pages; let i = index"
        class="flex items-center justify-between p-2 bg-gray-50 rounded-lg border hover:bg-gray-100 transition duration-200"
      >
        <!-- Botón de selección de pantalla -->
        <button
          (click)="changePantalla(i)"
          class="flex-1 text-left px-3 py-2 rounded-md text-sm font-medium transition duration-200"
          [ngClass]="{
            'bg-blue-600 text-white shadow-md': currentPantalla === i,
            'bg-white text-gray-800 hover:bg-gray-200': currentPantalla !== i
          }"
        >
          {{ pantalla.name }}
        </button>
        
        <!-- Botón de eliminar -->
        <button
          (click)="removePage(pantalla.id)"
          class="ml-2 p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-md transition duration-200"
          title="Eliminar pantalla"
        >
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
          </svg>
        </button>
      </div>
    </div>

    <!-- Mensaje cuando no hay páginas -->
    <div *ngIf="pages.length === 0" class="text-center py-6 text-gray-500">
      <svg class="w-10 h-10 mx-auto mb-3 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
      </svg>
      <p class="text-sm">No hay pantallas creadas</p>
      <p class="text-xs text-gray-400 mt-1">Haz clic en "Nueva Pantalla" para comenzar</p>
    </div>


  </div>

  <!-- JSON del canvas -->
  <div class="mt-6">
    <h3 class="text-sm font-semibold mb-2 text-gray-700">JSON Canvas</h3>
    <div class="bg-white border rounded-lg p-3 max-h-60 overflow-auto">
      <pre class="text-xs whitespace-pre-wrap text-gray-600">{{ getPantallaSinTopLeft() | json }}</pre>
    </div>
  </div>
</aside>